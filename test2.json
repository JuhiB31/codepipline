{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "CloudFormation template to create a VPC and an S3 bucket",

    "Resources": {
        "MyVPC": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
                "CidrBlock": "10.0.0.0/16",
                "EnableDnsSupport": true,
                "EnableDnsHostnames": true,
                "Tags": [
                    { "Key": "Name", "Value": "MyCutfygygvhstomVPC" }
                ]
            }
        },

        "MySubnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "VpcId": { "Ref": "MyVPC" },
                "CidrBlock": "10.0.1.0/24",
                "MapPublicIpOnLaunch": true,
                "Tags": [
                    { "Key": "Name", "Value": "PublicSubnet" }
                ]
            }
        },

        "MyInternetGateway": {
            "Type": "AWS::EC2::InternetGateway"
        },

        "AttachGateway": {
            "Type": "AWS::EC2::VPCGatewayAttachment",
            "Properties": {
                "VpcId": { "Ref": "MyVPC" },
                "InternetGatewayId": { "Ref": "MyInternetGateway" }
            }
        },

        "MyRouteTable": {
            "Type": "AWS::EC2::RouteTable",
            "Properties": {
                "VpcId": { "Ref": "MyVPC" }
            }
        },

        "MyRoute": {
            "Type": "AWS::EC2::Route",
            "DependsOn": "AttachGateway",
            "Properties": {
                "RouteTableId": { "Ref": "MyRouteTable" },
                "DestinationCidrBlock": "0.0.0.0/0",
                "GatewayId": { "Ref": "MyInternetGateway" }
            }
        },

        "MySubnetRouteTableAssociation": {
            "Type": "AWS::EC2::SubnetRouteTableAssociation",
            "Properties": {
                "SubnetId": { "Ref": "MySubnet" },
                "RouteTableId": { "Ref": "MyRouteTable" }
            }
        },

        "MyS3Bucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "BucketName": "my-cloudformation-s3-bucket"
            }
        }
    },

    "Outputs": {
        "VPCId": {
            "Description": "VPC ID",
            "Value": { "Ref": "MyVPC" }
        },
        "S3BucketName": {
            "Description": "S3 Bucket Name",
            "Value": { "Ref": "MyS3Bucket" }
        }
    }
}
